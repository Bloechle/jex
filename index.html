<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jex Framework Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        dark: {
                            50: '#f8fafc', 100: '#f1f5f9', 200: '#e2e8f0',
                            300: '#cbd5e1', 400: '#94a3b8', 500: '#64748b',
                            600: '#475569', 700: '#334155', 800: '#1e293b', 900: '#0f172a'
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="dark bg-dark-900 text-gray-100 min-h-screen">

<!-- Header -->
<div class="max-w-4xl mx-auto px-6 py-12 text-center">
    <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-blue-600 rounded-2xl mx-auto mb-6 flex items-center justify-center shadow-lg">
        <span class="text-white font-bold text-2xl">J</span>
    </div>
    <h1 class="text-4xl font-light text-gray-100 mb-3">Jex Framework</h1>
    <p class="text-gray-400 text-lg">Lightweight DOM manipulation with zero dependencies</p>
</div>

<!-- Demo Section -->
<div class="max-w-4xl mx-auto px-6 pb-12">

    <!-- Demo Controls -->
    <div class="bg-dark-800 rounded-2xl p-8 border border-dark-700 mb-8">
        <h2 class="text-xl font-medium text-gray-100 mb-6">Interactive Demo</h2>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            <button id="addBox" class="px-6 py-3 bg-gradient-to-r from-purple-500 to-blue-600 text-white rounded-xl font-medium hover:shadow-lg transition-all duration-200 transform hover:scale-105">
                Add Box
            </button>
            <button id="showToast" class="px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl font-medium hover:shadow-lg transition-all duration-200 transform hover:scale-105">
                Show Toast
            </button>
            <button id="logMessage" class="px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-600 text-white rounded-xl font-medium hover:shadow-lg transition-all duration-200 transform hover:scale-105">
                Log Message
            </button>
            <button id="clearAll" class="px-6 py-3 bg-gradient-to-r from-red-500 to-rose-600 text-white rounded-xl font-medium hover:shadow-lg transition-all duration-200 transform hover:scale-105">
                Clear All
            </button>
        </div>
    </div>

    <!-- Demo Area -->
    <div class="bg-dark-800 rounded-2xl border border-dark-700 overflow-hidden">
        <div class="p-6 border-b border-dark-700">
            <h3 class="text-lg font-medium text-gray-100 flex items-center">
                <i data-lucide="play-circle" class="w-5 h-5 mr-2 text-purple-400"></i>
                Demo Area
            </h3>
        </div>
        <div id="demoArea" class="p-8 min-h-[300px] flex items-center justify-center">
            <div class="text-center text-gray-500">
                <div class="w-20 h-20 mx-auto mb-4 bg-dark-700 rounded-full flex items-center justify-center border border-dark-600">
                    <i data-lucide="mouse-pointer-click" class="w-10 h-10 text-gray-600"></i>
                </div>
                <p class="text-lg font-medium text-gray-400 mb-2">Ready to interact</p>
                <p class="text-sm text-gray-600">Click the buttons above to see Jex in action</p>
            </div>
        </div>
    </div>
</div>

<!-- Footer -->
<div class="max-w-4xl mx-auto px-6 pb-8 text-center">
    <div class="flex items-center justify-center space-x-6 text-sm text-gray-500">
        <span class="flex items-center">
            <kbd class="px-2 py-1 bg-dark-800 rounded border border-dark-600 mr-2">F2</kbd>
            Debug Console
        </span>
        <span class="flex items-center">
            <i data-lucide="github" class="w-4 h-4 mr-2"></i>
            Open Source
        </span>
        <span class="flex items-center">
            <i data-lucide="zap" class="w-4 h-4 mr-2"></i>
            Zero Dependencies
        </span>
    </div>
</div>

<script type="module">
    /**
     * JexDemo.js - Elegant demonstration of Jex Framework capabilities
     *
     * CLASS STRUCTURE:
     * ---------------
     * Public Fields:
     *   - boxCount {number}: Counter for created interactive boxes
     *
     * Private Fields:
     *   - #colors {Array}: Available gradient color combinations
     *   - #animations {Array}: Available animation effects
     *
     * Public Methods:
     *   - onInit(): Promise<void> - Initialize the demo application
     *   - addBox(): void - Create and add an interactive box
     *   - showToast(): void - Display toast notification
     *   - logMessage(): void - Log demo message with data
     *   - clearAll(): void - Clear demo area and reset state
     *
     * Dependencies:
     *   - JexApp: Base application framework
     *   - All Jex components loaded dynamically
     *
     * Relations:
     *   - Extends: JexApp for application foundation
     *   - Demonstrates: Core Jex Framework features
     *
     * Last Modified: 2025-09-16 - Dark theme demo with enhanced interactivity
     */

        // Configuration - easily switch between CDN and local
    const { JexApp } = await import('./JexApp.js');
    JexApp.USE_CDN = true; // Set to true for CDN, false for local files

    class JexDemo extends JexApp {
        // Public fields
        boxCount = 0;

        // Private fields
        #colors = [
            'from-purple-500 to-pink-500',
            'from-blue-500 to-cyan-500',
            'from-green-500 to-emerald-500',
            'from-amber-500 to-orange-500',
            'from-red-500 to-rose-500',
            'from-indigo-500 to-purple-500',
            'from-teal-500 to-green-500',
            'from-orange-500 to-red-500'
        ];

        #animations = [
            'animate-bounce',
            'animate-pulse',
            'animate-spin',
            'animate-ping'
        ];

        constructor() {
            super({
                name: 'Jex Framework Demo',
                version: '1.0.0',
                enableKeyboardShortcuts: true
            });
        }

        async onInit() {
            this.#setupEventHandlers();
            console.info('Jex Demo ready - try the interactive buttons!');
        }

        onReady() {
            // Silent initialization for demo
            if (this.toast) {
                this.toast.success('Jex Framework Demo loaded successfully!');
            }
        }

        #setupEventHandlers() {
            // Button event handlers using Jex
            this.jex.$('addBox')?.onClick(() => this.addBox());
            this.jex.$('showToast')?.onClick(() => this.showToast());
            this.jex.$('logMessage')?.onClick(() => this.logMessage());
            this.jex.$('clearAll')?.onClick(() => this.clearAll());

            // Keyboard shortcuts
            this.jex.onKey('Enter', () => this.addBox());
            this.jex.onKey('Space', (e) => {
                e.preventDefault();
                this.showToast();
            });
        }

        addBox() {
            this.boxCount++;
            const colorGradient = this.#colors[Math.floor(Math.random() * this.#colors.length)];
            const animation = this.#animations[Math.floor(Math.random() * this.#animations.length)];

            const demoArea = this.jex.$('demoArea');

            // Clear placeholder on first box
            if (this.boxCount === 1) {
                demoArea.clear();
            }

            // Create interactive box using Jex
            const box = this.jex.create('div')
                .cls(`w-20 h-20 bg-gradient-to-br ${colorGradient} rounded-2xl m-3 flex items-center justify-center text-white font-bold cursor-pointer transform transition-all duration-300 hover:scale-110 shadow-lg opacity-0`)
                .text(this.boxCount)
                .attr('title', `Box #${this.boxCount} - Click to animate!`)
                .onClick(() => {
                    box.cls(`+${animation}`);
                    setTimeout(() => box.cls(`-${animation}`), 2000);

                    if (this.toast) {
                        this.toast.info(`Box #${this.boxCount} animated!`);
                    }
                });

            demoArea.append(box);

            // Smooth fade-in animation
            setTimeout(() => box.cls('+opacity-100'), 50);

            this.logger?.debug('Box created:', {
                id: this.boxCount,
                color: colorGradient,
                animation
            });
        }

        showToast() {
            if (this.toast) {
                const messages = [
                    'Hello from Jex Framework! ðŸ‘‹',
                    'Dark theme looks amazing! ðŸŒ™',
                    'Zero dependencies, maximum power! âš¡',
                    'Built with vanilla JavaScript! ðŸ¦',
                    'Lightweight and fast! ðŸš€'
                ];

                const message = messages[Math.floor(Math.random() * messages.length)];
                this.toast.success(message);
            } else {
                // Fallback if toast not available
                const message = 'Toast system not available - check console for details';
                alert(message);
                console.warn(message);
            }
        }

        logMessage() {
            const timestamp = new Date().toLocaleTimeString();
            const message = `Demo interaction logged at ${timestamp}`;

            const logData = {
                boxCount: this.boxCount,
                timestamp: timestamp,
                userAgent: navigator.userAgent.substring(0, 50) + '...',
                screenSize: `${window.screen.width}x${window.screen.height}`,
                demo: 'Jex Framework Interactive Demo'
            };

            if (this.logger) {
                this.logger.info(message, logData);
                this.toast?.info('Message logged - press F2 to view console');
            } else {
                console.log(message, logData);
                alert('Message logged to browser console');
            }
        }

        clearAll() {
            const demoArea = this.jex.$('demoArea');

            // Smooth clear animation
            demoArea.cls('+opacity-50 +scale-95');

            setTimeout(() => {
                demoArea.clear();

                // Restore placeholder
                const placeholder = this.jex.create('div')
                    .cls('text-center text-gray-500')
                    .html(`
                        <div class="w-20 h-20 mx-auto mb-4 bg-dark-700 rounded-full flex items-center justify-center border border-dark-600">
                            <i data-lucide="mouse-pointer-click" class="w-10 h-10 text-gray-600"></i>
                        </div>
                        <p class="text-lg font-medium text-gray-400 mb-2">Ready to interact</p>
                        <p class="text-sm text-gray-600">Click the buttons above to see Jex in action</p>
                    `);

                demoArea.append(placeholder).cls('-opacity-50 -scale-95');

                // Reinitialize Lucide icons for the new placeholder
                lucide.createIcons();

                this.boxCount = 0;

                if (this.toast) {
                    this.toast.info('Demo cleared - ready for new interactions!');
                }

                this.logger?.info('Demo area cleared', { previousBoxCount: this.boxCount });
            }, 300);
        }
    }

    // Launch the demo application
    const demo = await JexDemo.launch(JexDemo);

    // Initialize Lucide icons
    lucide.createIcons();
</script>

</body>
</html>