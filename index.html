<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jex Framework Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body class="bg-gray-100 min-h-screen p-8">
<!-- Header -->
<div class="max-w-2xl mx-auto text-center mb-12">
    <div class="w-16 h-16 bg-blue-500 rounded-xl mx-auto mb-4 flex items-center justify-center">
        <span class="text-white font-bold text-2xl">J</span>
    </div>
    <h1 class="text-3xl font-bold text-gray-900">Jex Framework</h1>
    <p class="text-gray-600 mt-2">Lightweight DOM manipulation with zero dependencies</p>
</div>

<!-- Demo Buttons -->
<div class="max-w-2xl mx-auto mb-8">
    <div class="bg-white rounded-xl p-6 shadow-sm">
        <h2 class="text-lg font-semibold mb-4">Try It Out</h2>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
            <button id="addBox" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">Add Box</button>
            <button id="showToast" class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600">Show Toast</button>
            <button id="logMessage" class="px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600">Log Message</button>
            <button id="clearAll" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600">Clear All</button>
        </div>
    </div>
</div>

<!-- Demo Area -->
<div class="max-w-2xl mx-auto">
    <div id="demoArea" class="bg-white rounded-xl p-8 shadow-sm min-h-[200px] flex items-center justify-center text-gray-500">
        Click buttons above to see Jex in action!
    </div>
</div>

<!-- Footer -->
<div class="max-w-2xl mx-auto text-center mt-8 text-sm text-gray-500">
    Press <kbd class="px-2 py-1 bg-white rounded border">F2</kbd> for console
</div>

<script type="module">
    /**
     * SimpleJexDemo.js - Clean and simple Jex Framework demonstration
     *
     * CLASS STRUCTURE:
     * ---------------
     * Public Fields:
     *   - boxCount {number}: Counter for created boxes
     *
     * Private Fields:
     *   - #jex {Jex}: Core Jex instance
     *   - #logger {JexLogger|null}: Logger instance if available
     *   - #toast {JexToast|null}: Toast instance if available
     *
     * Public Methods:
     *   - init(): Promise<void> - Initialize the demo
     *   - addBox(): void - Add a colored box to demo area
     *   - showToast(): void - Display a toast notification
     *   - logMessage(): void - Log a demo message
     *   - clearAll(): void - Clear the demo area
     *
     * Dependencies:
     *   - Jex.js: Core DOM manipulation library
     *   - JexLogger.js: Logging system (optional)
     *   - JexToast.js: Toast notifications (optional)
     *
     * Relations:
     *   - Demonstrates: Basic Jex Framework capabilities
     *   - Uses: Minimal subset of framework features
     *
     * Last Modified: 2025-01-16 - Simplified elegant demo
     */

    class SimpleJexDemo {
        // Public fields
        boxCount = 0;

        // Private fields
        #jex = null;
        #logger = null;
        #toast = null;

        async init() {
            // Load Jex core (required)
            try {
                const { jex } = await import('https://cdn.jsdelivr.net/gh/Bloechle/jex@latest/Jex.js');
                this.#jex = jex;
                console.log('✅ Jex loaded');
            } catch (error) {
                console.error('❌ Jex failed to load:', error);
                return;
            }

            // Load optional components
            try {
                const { logger } = await import('https://cdn.jsdelivr.net/gh/Bloechle/jex@latest/JexLogger.js');
                this.#logger = logger;
                console.log('✅ Logger loaded');
            } catch (error) {
                console.log('ℹ️ Logger not available');
            }

            try {
                const { toast } = await import('https://cdn.jsdelivr.net/gh/Bloechle/jex@latest/JexToast.js');
                this.#toast = toast;
                this.#toast.mount();
                console.log('✅ Toast loaded');
            } catch (error) {
                console.log('ℹ️ Toast not available');
            }

            this.#setupEvents();
            lucide.createIcons();
        }

        #setupEvents() {
            this.#jex.$('addBox')?.onClick(() => this.addBox());
            this.#jex.$('showToast')?.onClick(() => this.showToast());
            this.#jex.$('logMessage')?.onClick(() => this.logMessage());
            this.#jex.$('clearAll')?.onClick(() => this.clearAll());

            // F2 for console
            this.#jex.onKey('F2', (e) => {
                e.preventDefault();
                if (this.#logger?.toggleConsole) {
                    this.#logger.toggleConsole();
                }
            });
        }

        addBox() {
            this.boxCount++;
            const colors = ['blue', 'green', 'purple', 'red', 'yellow', 'pink'];
            const color = colors[Math.floor(Math.random() * colors.length)];

            const demoArea = this.#jex.$('demoArea');

            // Clear placeholder text on first box
            if (this.boxCount === 1) {
                demoArea.clear();
            }

            const box = this.#jex.create('div')
                .cls(`w-16 h-16 bg-${color}-500 rounded-lg m-2 flex items-center justify-center text-white font-bold cursor-pointer transform transition-all hover:scale-110 opacity-0`)
                .text(this.boxCount)
                .onClick(() => {
                    box.cls('+animate-bounce');
                    setTimeout(() => box.cls('-animate-bounce'), 1000);
                });

            demoArea.append(box);

            // Fade in
            setTimeout(() => box.cls('+opacity-100'), 10);
        }

        showToast() {
            if (this.#toast) {
                this.#toast.success('Hello from Jex! 👋');
            } else {
                alert('Toast system not available');
            }
        }

        logMessage() {
            const message = `Demo message #${Date.now()}`;

            if (this.#logger) {
                this.#logger.info(message, { boxCount: this.boxCount });
            } else {
                console.log(message);
            }
        }

        clearAll() {
            const demoArea = this.#jex.$('demoArea');
            demoArea.clear().html('Click buttons above to see Jex in action!').cls('+text-gray-500 +flex +items-center +justify-center');
            this.boxCount = 0;

            if (this.#toast) {
                this.#toast.info('Demo cleared!');
            }
        }
    }

    // Start the demo
    const demo = new SimpleJexDemo();
    demo.init();
</script>
</body>
</html>